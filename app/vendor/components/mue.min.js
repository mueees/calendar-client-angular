!function(){angular.module("mue.template",[])}(),angular.module("mue.template").run(["$templateCache",function(a){"use strict";a.put("src/core/components/calendar-manager/calendar-manager.directive.html",'<div class="mue-calendar-manager">\n    <div class="panel mue-panel mue-panel-wide mue-panel-lagoon">\n        <div class="panel-heading">\n            {{title}}\n        </div>\n        <div class="panel-body">\n            <div class="list-group mue-list-group mue-list-group-flat mue-list-group-dark">\n                <div class="list-group-item list-group-item-lagoon">\n                    <div class="pull-left">\n                        <i class="fa fa-desktop mue-icon"></i>\n                    </div>\n                    <div class="pull-right">\n                        <button class="btn btn-clear">\n                            <i class="fa fa-trash mue-icon"></i>\n                        </button>\n                    </div>\n                    <div class="mue-list-group-content">\n                        Birthday\n                    </div>\n                </div>\n                <div class="list-group-item list-group-item-lagoon">\n                    <div class="pull-left">\n                        <i class="fa fa-desktop mue-icon"></i>\n                    </div>\n                    <div class="pull-right">\n                        <button class="btn btn-clear" >\n                            <i class="fa fa-trash mue-icon"></i>\n                        </button>\n                    </div>\n                    <div class="mue-list-group-content">\n                        Event\n                    </div>\n                </div>\n                <div class="list-group-item list-group-item-lagoon">\n                    <div class="pull-left">\n                        <i class="fa fa-desktop mue-icon"></i>\n                    </div>\n                    <div class="pull-right">\n                        <button class="btn btn-clear" data-link="remove">\n                            <i class="fa fa-trash mue-icon"></i>\n                        </button>\n                    </div>\n                    <div class="mue-list-group-content">\n                        Weeding\n                    </div>\n                </div>\n                <div class="list-group-item list-group-item-lagoon">\n                    <div class="pull-left">\n                        <i class="fa fa-desktop mue-icon"></i>\n                    </div>\n                    <div class="pull-right">\n                        <button class="btn btn-clear" data-link="remove">\n                            <i class="fa fa-trash mue-icon"></i>\n                        </button>\n                    </div>\n                    <div class="mue-list-group-content">\n                        Work\n                    </div>\n                </div>\n                <div class="list-group-item list-group-item-lagoon">\n                    <div class="pull-left">\n                        <i class="fa fa-desktop mue-icon"></i>\n                    </div>\n                    <div class="pull-right">\n                        <button class="btn btn-clear" data-link="remove">\n                            <i class="fa fa-trash mue-icon"></i>\n                        </button>\n                    </div>\n                    <div class="mue-list-group-content">\n                        Holidays\n                    </div>\n                </div>\n            </div>\n            <ul class="mue-toolbar-action mue-toolbar-action-horizontal mue-toolbar-action-dark">\n                <li>\n                    <button data-link="new" class="btn btn-clear">\n                        <i class="fa fa-plus mue-icon"></i>\n                    </button>\n                </li>\n                <li>\n                    <button data-link="select" class="btn btn-clear">\n                        <i class="fa fa-check-square-o mue-icon"></i>\n                    </button>\n                </li>\n                <li>\n                    <button data-link="unSelect" class="btn btn-clear">\n                        <i class="fa fa-square-o mue-icon"></i>\n                    </button>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div class="calendar-manager-footer"></div>\n</div>'),a.put("src/core/components/date-switcher/date-switcher.directive.html",'<button class="btn btn-lagoon mue-date-switcher-today" ng-click="today()" ng-disabled="isDisabled()">Today</button>\n\n<div class="btn-group mue-date-switcher-navigation">\n    <button type="button" class="btn btn-lagoon" ng-click="prev()"><</button>\n    <button type="button" class="btn btn-lagoon" ng-click="next()">></button>\n</div>\n\n<mue-date-viewer mue-config="dateViewerConfiguration"></mue-date-viewer>'),a.put("src/core/components/date-viewer/date-viewer.directive.html",'<div ng-switch="mueConfig.type">\n    <span ng-switch-when="1">\n        {{mueConfig.start | date:\'dd MMMM yyyy\'}}\n    </span>\n    <span ng-switch-when="2">\n'+"        {{mueConfig.start | date:'dd MMMM'}} - {{mueConfig.end | date:'dd MMMM'}}, {{mueConfig.end | date:'yyyy'}}\n    </span>\n</div>"),a.put("src/core/components/list-group/list-group.directive.html",'<div class="list-group mue-list-group " ng-class="{\'mue-list-group-flat\': mueConfig.ui.flat, \'mue-list-group-dark\': mueConfig.ui.dark}">\n    <div ng-click="mueConfig.clickHandler(item)" ng-class="{active: item.active}" ng-repeat="item in mueConfig.items" class="list-group-item list-group-item-lagoon">\n        <div class="pull-left">\n            <i class="fa fa-{{item.icon}} mue-icon"></i>\n        </div>\n        <div class="pull-right">\n            <button ng-click="action.handler(item)" ng-repeat="action in item.actions" class="btn btn-clear">\n                <i class="fa fa-{{action.icon}} mue-icon"></i>\n            </button>\n        </div>\n        <div class="mue-list-group-content">\n            {{item.text}}\n        </div>\n    </div>\n</div>'),a.put("src/core/components/login/login.directive.html",'<div class="panel mue-panel mue-card mue-card-lagoon">\n    <div class="panel-body">\n        <div class="mue-card-icon">\n            <i class="fa fa-calendar mue-icon"></i>\n        </div>\n\n        <h4 class="mue-card-title">{{mueConfig.name || \'New Application\'}}</h4>\n\n        <div class="mue-card-description" ng-if="mueConfig.description">\n            {{mueConfig.description}}\n        </div>\n\n        <button ng-click="login()" class="btn btn-action btn-strawberry btn-block">{{mueConfig.action || \'Login\'}}\n        </button>\n    </div>\n</div>'),a.put("src/core/components/seed/seed.directive.html","Seed directive")}]),function(){angular.module("mue.core.calendar-manager",["mue.template"])}(),function(){angular.module("mue.core.date-switcher",["mue.template","mue.core.date-viewer"])}(),function(){angular.module("mue.core.date-viewer",["mue.template"])}(),function(){angular.module("mue.core.list-group",["mue.template"])}(),function(){angular.module("mue.core.login",["mue.template","mue.core.security"])}(),function(){angular.module("mue.core.seed",["mue.template"])}(),function(){angular.module("mue.core.error-handler",["mue.template","angular-growl"])}(),function(){"use strict";angular.module("mue.core.resources",["restangular"])}(),function(){"use strict";angular.module("mue.core.security",["ui.router","mue.core.user"])}(),function(){angular.module("mue.core.user",[])}(),function(){"use strict";angular.module("mue.core.error-handler").config(["$provide",function(a){a.decorator("$exceptionHandler",["$delegate","$injector",function(a,b){return function(c,d){b.get("rxScriptErrorHandler").handleScriptError(c,d),a(c,d)}}])}])}(),function(){"use strict";angular.module("mue.core.error-handler").constant("MUE_ERROR_MESSAGES",{httpDefaultError:"An unexpected server communication error has occurred. Status: %s.",httpNetworkError:"Network communication error has occurred.",scriptError:"An unexpected script error has occurred."})}(),function(){"use strict";angular.module("mue.core.security").constant("MUE_AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",logoutFailed:"auth-logout-failed",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"})}(),function(){angular.module("mue.core.error-handler").factory("mueScriptErrorHandler",["growl","MUE_ERROR_MESSAGES",function(a,b){function c(c,d){var e=b.scriptError;_.isString(c.message)&&(e+=" "+c.message),a.addErrorMessage(e)}return{handleScriptError:c}}])}(),function(){"use strict";angular.module("mue.core.resources").factory("mueCommandResource",["mueResource",function(a){var b=function(b){a.withSubUrlConfiguration(RX_RESOURCE_URLS.command,function(a){})};return{create:function(a){return new b(a)}}}])}(),function(){"use strict";angular.module("mue.core.resources").factory("mueResource",["Restangular",function(a){return a.withConfig(function(a){a.setBaseUrl("/api")})}])}(),function(){"use strict";angular.module("mue.core.security").provider("mueAuthentication",function(){function a(a,b){return arguments.length&&(c={name:a,params:b}),c}function b(a,b){return arguments.length&&(_.isString(a)?d={name:a,params:b}:_.isFunction(a)?d=a:_.isObject(a)&&_.isString(a.name)&&(d=a)),d}var c=null,d=null;return{loginState:a,appState:b,$get:["$state","$rootScope","$q","mueAuthUserResource","mueUserResource","mueSession","mueToken","MUE_AUTH_EVENTS",function(a,b,e,f,g,h,i,j){function k(){return f.login()}function l(){var a=rxAuthUserResource.logout(),b=function(){h.destroy()};return a.then(b,b),a}function m(){var a=e.defer();return h.isAlive()?a.resolve():g.getCurrentUser().then(function(b){h.create(b.plain()),a.resolve()}),a.promise}function n(b){i.create(b.client_token);var c=q;_.isFunction(c)&&(c=c()),_.isString(c)&&(c={name:c}),a.go(c.name,c.params),q=d}function o(){a.go(c.name,c.params)}function p(){i.destroy(),h.destroy(),q=d,o()}if(!c||!c.name||!d)throw new Error("mueAuthentication service has not been configured properly.");var q=d;return b.$on("$stateChangeStart",function(a,b,d){b&&b.name!==c.name&&(q={name:b.name,params:d})}),b.$on(j.notAuthenticated,function(){h.destroy(),o()}),b.$on(j.loginSuccess,n),b.$on(j.logoutSuccess,p),b.$on(j.logoutFailed,p),{login:k,logout:l,initSession:m}}]}})}(),function(){"use strict";angular.module("mue.core.security").factory("mueSession",function(){function a(a){e=a}function b(){e=null}function c(){return e}function d(){return null!==e}var e=null;return{create:a,destroy:b,getUser:c,isAlive:d}})}(),function(){"use strict";angular.module("mue.core.security").factory("mueToken",function(){function a(a){localStorage.setItem(e,a)}function b(){localStorage.setItem(e,null)}function c(){localStorage.getItem(e)}function d(){return Boolean(localStorage.getItem(e))}var e="mueToken";return{create:a,destroy:b,getToken:c,hasToken:d}})}(),angular.module("mue.core.calendar-manager").directive("mueCalendarManager",function(){return{restrict:"E",templateUrl:"src/core/components/calendar-manager/calendar-manager.directive.html",link:function(a,b){function c(){}function d(){}a.title="My calendars";var e=[{icon:"trash",handler:c},{icon:"gear",handler:d}];a.listConfig=[{id:"1",active:!1,text:"Birthday",icon:"desktop",actions:e},{id:"1",active:!1,text:"Birthday",icon:"desktop",actions:e}]}}}),angular.module("mue.core.date-switcher").directive("mueDateSwitcher",function(){return{restrict:"E",templateUrl:"src/core/components/date-switcher/date-switcher.directive.html",scope:{mueConfig:"="},link:function(a,b){function c(){return Math.floor((a.mueConfig.end-a.mueConfig.start)/864e5)}a.today=function(){switch(a.mueConfig.type){case 1:a.mueConfig.start=new Date;break;case 2:var b=c();a.mueConfig.start=new Date,a.mueConfig.end=moment(new Date).add(b,"d").toDate()}},a.prev=function(){var b=c();switch(a.mueConfig.type){case 1:a.mueConfig.start=moment(a.mueConfig.start).add(-1,"d").toDate();break;case 2:a.mueConfig.start=moment(a.mueConfig.start).add(-b,"d").toDate(),a.mueConfig.end=moment(a.mueConfig.end).add(-b,"d").toDate()}},a.next=function(){var b=c();switch(a.mueConfig.type){case 1:a.mueConfig.start=moment(a.mueConfig.start).add(1,"d").toDate();break;case 2:a.mueConfig.start=moment(a.mueConfig.start).add(b,"d").toDate(),a.mueConfig.end=moment(a.mueConfig.end).add(b,"d").toDate()}},a.isDisabled=function(){var b=!0,c=moment(a.mueConfig.start);switch(a.mueConfig.type){case 1:b=c.format("DD")==moment(new Date).format("DD");break;case 2:b=c.format("DD")==moment(new Date).format("DD")}return b},a.dateViewerConfiguration=a.mueConfig}}}),angular.module("mue.core.date-viewer").directive("mueDateViewer",function(){return{restrict:"E",templateUrl:"src/core/components/date-viewer/date-viewer.directive.html",scope:{mueConfig:"="},link:function(a,b){}}}),angular.module("mue.core.list-group").directive("mueListGroup",function(){return{restrict:"E",templateUrl:"src/core/components/list-group/list-group.directive.html",scope:{mueConfig:"="}}}),angular.module("mue.core.login").directive("mueLogin",["mueAuthentication","MUE_AUTH_EVENTS","$rootScope",function(a,b,c){return{restrict:"E",templateUrl:"src/core/components/login/login.directive.html",scope:{mueConfig:"="},link:function(d){d.login=function(){a.login().then(function(a){c.$broadcast(b.loginSuccess,a)})}}}}]),angular.module("mue.core.seed").directive("mueSeed",function(){return{restrict:"E",templateUrl:"src/core/components/seed/seed.directive.html"}}),function(){"use strict";angular.module("mue.core.security").provider("mueAuthUserResource",function(){function a(a){c=a}function b(a){a=a||{},a.origin&&(e=a.origin,f=e+"/provide/")}var c=null,d=12e4,e="http://proxy.mue.in.ua",f="http://proxy.mue.in.ua/provide/",g=null;return{setOauthKey:a,config:b,$get:["$q",function(a){function b(){this.timeout=6e4,this.initialize()}function h(){return g?void 0:(g=new b,g.open())}if(b.prototype={initialize:function(){},open:function(){var b=this;return this.defer=a.defer(),this.window=window.open(f+c),window.addEventListener("message",function(a){b.receiveMessage(a)},!1),this.openTimeout=setTimeout(function(){b.reject("Timeout")},d),this.openInterval=setInterval(function(){b.window.postMessage({origin:window.location.origin,host:window.location.host,href:window.location.href},"*")},500),this.windowClosedInterval=setInterval(function(){b.window.closed&&b.reject("Window was closed")},1e3),this.defer.promise},reject:function(a){this.clearOpenInterval(),this.clearWindowClosedInterval(),this.clearOpenTimeout(),this.unSubscribeMessage(),this.defer.reject({status:500,message:a||"Server error"})},unSubscribeMessage:function(){window.removeEventListener("message",this.receiveMessage,!1)},clearWindowClosedInterval:function(){clearInterval(this.windowClosedInterval)},clearOpenInterval:function(){this.openInterval&&(clearInterval(this.openInterval),this.openInterval=null)},clearOpenTimeout:function(){this.openTimeout&&(clearTimeout(this.openTimeout),this.openTimeout=null)},receiveMessage:function(a){if(a.origin==e){this.clearOpenInterval(),this.clearOpenTimeout(),this.unSubscribeMessage();var b=JSON.parse(a.data);200==b.status?this.defer.resolve(b):this.defer.reject(b)}}},!c)throw new Error("mueAuthUserResource service has not been configured properly.");return{login:h}}]}})}(),function(){"use strict";angular.module("mue.core.user").factory("mueUserResource",["$q",function(a){return{getCurrentUser:function(){return a.when()}}}])}();